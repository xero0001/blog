---
title: ğŸ’» C++ ê°œì¸ ì •ë¦¬ 2 (C++ 11/14/17)
description: ê°œì¸ì ìœ¼ë¡œ ë¶€ì¡±í•œ ë¶€ë¶„ë§Œ ì •ë¦¬í•œ C++ ë…¸íŠ¸
tags: "C++"
date: "2020-12-20S02"
---

# C++ 11 ~

## auto

## static_assert

assertëŠ” ì‹¤í–‰ ì¤‘ì— í‰ê°€í•˜ê¸° ë•Œë¬¸ì— static_assertë¥¼ ì“°ëŠ”ê²Œ ì¢‹ë‹¤. static_assertëŠ” ì»´íŒŒì¼ ë•Œ í‰ê°€í•¨.

## default, delete

defaultëŠ” ì»´íŒŒì¼ëŸ¬ê°€ íŠ¹ì •í•œ ìƒì„±ì, ì—°ì‚°ì ë° ì†Œë©¸ìë¥¼ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆìŒ. ë¹„ì–´ìˆëŠ” ìƒì„±ìë‚˜ ì†Œë©¸ìë¥¼ êµ¬ì²´í™”í•  í•„ìš” ì—†ë‹¤.

defaultëŠ” ë¹ˆ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì¤Œ.

deleteëŠ” ì‚¬ìš©í•˜ì§€ ëª»í•˜ê²Œ ë§Œë“¤ì–´ì¤Œ. ë‹¤ìŒ ì˜ˆì—ì„œ ë³µì‚¬ ìƒì„±ìë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê²Œí•¨.

```cpp
// Dog.h
class Dog
{
public:
  Dog() = default;
  Dog(std::string name);
  Dog(const Dog& other) = delete;
private:
  std::string mName;
}
```

## final, override

finalë¡œ ìƒì† ë§‰ê¸°.

overrideë¡œ ì˜¤ë²„ë¼ì´ë”© ëª…ì‹œí™”.

## nullptr

NULL ì“°ì§€ë§ê³  nullptr ì”ì‹œë‹¤.

# ìœ ë‹ˆí¬ í¬ì¸í„°

ì›ì‹œ í¬ì¸í„°ë¥¼ ë‹¨ë…ìœ¼ë¡œ ì†Œìœ í•˜ê³ , ëˆ„êµ¬í•˜ê³ ë„ ê³µìœ í•˜ì§€ ì•ŠìŒ.

ë”°ë¼ì„œ ë³µì‚¬ë‚˜ ëŒ€ì…ì´ ë¶ˆê°€í•˜ë‹¤.

scopeë¥¼ ë²—ì–´ë‚  ë•Œ ìë™ìœ¼ë¡œ deleteë¨.

```cpp
int main()
{
  // Vector* myVector = new Vector(10.f, 30.f);
  std::unique_ptr<Vector> myVector(new Vector(10.f, 30.f));

  myVector->Print();

  // delete myVector
  return 0;
}
```

```cpp
std::unique_ptr<Vector> myVector(new Vector(10.f, 30.f));

std::unique_ptr<Vector> copiedVector1 = myVector; // ì»´íŒŒì¼ ì—ëŸ¬
std::unique_ptr<Vector> compiedVector2(myVector); // ì»´íŒŒì¼ ì—ëŸ¬
```

ì˜›ë‚ ì— ë²¡í„°ì— í¬ì¸í„° ì €ì¥ì‹œ

```cpp
int main()
{
  std::vector<Player*> players;

  players.push_back(new Player("Lulu"));
  players.push_back(new Player("Coco"));

  for (int i=0; i<players.size(); ++i)
  {
    delete players[i];
  }

  players.clear();
}
```

ìœ ë‹ˆí¬ í¬ì¸í„°ëŠ” ìë™ìœ¼ë¡œ ì‚­ì œí•´ì¤Œ.

```cpp
int main()
{
  std::vector<std::unique_ptr<Player>> playerList;

  playerList.push_back(std::unique_ptr<Player>(new Player("Lulu")));
  playerList.push_back(std::unique_ptr<Player>(new Player("Coco")));

  // í´ë¦¬ì–´í•˜ë©´ì„œ ë‹¤ ì§€ì›Œì¤Œ
  playerList.clear();

  // ì•ˆí•´ì¤˜ë„ ìŠ¤ì½”í”„ ë‚˜ê°€ë©´ì„œ ì‚­ì œë¨
}
```

## ë¬¸ì œì 

```cpp
Vector* vectorPtr = new Vecotr(10.f, 30.f);
std::unique_ptr<Vector> vector(vectorPtr);
std::unique_ptr<Vector> anotherVector(vectorPtr);
anotherVector = nullptr;

// ì´í›„ deleteí•  ë•Œ anotherVectorì—ì„œ ë¬¸ì œê°€ ìƒê¹€
```

## C++14 ì´í›„ í•´ê²°ì±…

ë‘˜ ì´ìƒì˜ std::unique_ptrê°€ ì›ì‹œ í¬ì¸í„°ë¥¼ ê³µìœ í•  ìˆ˜ ì—†ë„ë¡ ë§‰ìŒ.

ì›ì‹œ í¬ì¸í„°ë¥¼ ì•„ë¬´í•˜ê³ ë„ ê³µìœ í•˜ì§€ ì•ŠëŠ”ê²Œ ì›ì¹™.

```cpp
int main()
{
  // new ëŒ€ì‹  make_uniqueë¥¼ í˜¸ì¶œ
  std::unique_ptr<Vector> myVector = std::make_unique<Vector>(10.f, 30.f);

  // ...
}
```

ë‹¤ìŒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë¬´ì¡°ê±´ make_uniqueì—ì„œ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•´ì•¼í•œë‹¤.

```cpp
Vector* vectorPtr = new Vecotr(10.f, 30.f);
std::unique_ptr<Vector> vector1 = std::make_unique(vectorPtr);
```

## reset()

```cpp
std::unique_ptr<Vector> vector = std::make_unique<Vector>(10.f, 30.f);
// ì¬í• ë‹¹
vector.reset(new Vector(20.f, 40.f));
// nullptr ëŒ€ì…ê³¼ ê°™ìŒ
vector.reset();
```

## ì´ì™¸ì˜ í•¨ìˆ˜

get(), release()

move()ë¥¼ í†µí•´ ì†Œìœ ê¶Œ ì „ë‹¬.

```cpp
std::vector<std::unique_ptr<Player>> players;

std::unique_ptr<Player> coco = std::make_unique<Player>("Coco");
players.push_back(std::move(coco));
```

## ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

ê°€ëŠ¥í•œ ëª¨ë“ ê³³ì— ì“°ì.

# shared_ptr

ìë™ ë©”ëª¨ë¦¬ ê´€ë¦¬ì—ëŠ” GCì™€ ì°¸ì¡° ì¹´ìš´íŒ…ì´ ìˆë‹¤.

shared_ptrëŠ” ì°¸ì¡° ì¹´ìš´íŒ…ì´ë‹¤.

ì°¸ì¡°í• ë•Œë§ˆë‹¤ íšŸìˆ˜ë¥¼ ëŠ˜ë¦¬ê³ , ì°¸ì¡°ë¥¼ í•˜ëŠ” ê²ƒì´ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ë“±ìœ¼ë¡œ ì°¸ì¡°ë¥¼ ê·¸ë§Œë‘˜ ë•Œ íšŸìˆ˜ê°€ ì¤„ì–´ë“¬.

ê°•í•œ ì°¸ì¡°ì™€ ì•½í•œ ì°¸ì¡°ê°€ ìˆë‹¤.

## ê°•í•œ ì°¸ì¡°

ê°œì²´ Aê°€ ê°œì²´ Bë¥¼ ì°¸ì¡°í•  ë•Œ, ê°œì²´ BëŠ” ì ˆëŒ€ ì†Œë©¸ë˜ì§€ ì•ŠìŒ.

ì¼ë°˜ì ìœ¼ë¡œ ìƒˆ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ë•Œ ì°¸ì¡° íšŸìˆ˜ê°€ ëŠ˜ì–´ë‚¨.

ê°•í•œ ì°¸ì¡° íšŸìˆ˜ê°€ 0ì´ë  ë•Œ í•´ë‹¹ ê°œì²´ëŠ” ì†Œë©¸ë¨.

## ì°¸ì¡° ì¹´ìš´íŒ…ì˜ ë¬¸ì œì 

ë©€í‹° ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ì•ˆì „í•˜ë ¤ë©´ lockì´ë‚˜ atomic ì—°ì‚°ì´ í•„ìš”.

ì°¸ì¡°ê°€ ë„ˆë¬´ ìì£¼ ë°”ë€Œë©´ ëŠë¦¼.

ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë„ ìˆë‹¤.

ê°œì²´ Aê°€ ê°œì²´ Bë¥¼ ì°¸ì¡°í•˜ê³ , ê°œì²´ Bê°€ ê°œì²´ Aë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°. ì ˆëŒ€ í•´ì œë˜ì§€ ì•ŠìŒ.

# weak_ptr

(ì¶”í›„ ë³´ì™„)

ì•½í•œ ì°¸ì¡° ì¹´ìš´íŠ¸ëŠ” ì•½í•œ ì°¸ì¡°ì˜ ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ”ë° ì‚¬ìš©ë¨.

ì•½í•œ ì°¸ì¡°ì˜ ê°œì²´ë“¤ì€ ê°•í•œ ì°¸ì¡° ì¹´ìš´íŠ¸ê°€ 0ì´ë  ë•Œ ì†Œë©¸ë¨.

ìˆœí™˜ ì°¸ì¡° ë¬¸ì œë¥¼ í•´ê²°í•¨.

```cpp
std::shared_ptr<Person> owner = std::make_shared<Person>("Lulu");
std::weak_ptr<Person> weakOwner = owner;

// ì•½í•œ í¬ì¸í„°ì—ì„œ lockì„ í•˜ë©´ ê°•í•œ í¬ì¸í„°ë¥¼ ë±‰ìŒ
// ì›ì‹œ í¬ì¸í„°ê°€ ì¡´ì¬í•˜ë©´ ê³µìœ  í¬ì¸í„°ë¥¼ ë§Œë“¤ì–´ì¤Œ
std::shared_ptr<Person> lockedOwner = weakOwner.lock();

return 0;
```

# lvalueì™€ rvalue

# ëª¨ë“ˆ ì‹œìŠ¤í…œ

## ê³¼ê±°

```cpp
// Math.h
int Add(int a, int b);
int Multiply(int a, int b);

// Math.cpp
#include "Math.h"

int Add(int a, int b) {return a+b};
int Multiply(int a, int b) {return a*b;}

// Main.cpp
#include "Math.h"

int main()
{
  std::cout << Add(1,2) << std::endl;
  std::cout << Multiply(3,2) << std::endl;
}
```

## ëª¨ë“ˆ

```cpp
// Math.ixx
module Math;

export int Add(int a, int b)
{
  return a+b;
}

export int Multiply(int a, int b)
{
  return a*b;
}

// Main.cpp
import Math;

int main()
{
  std::cout << Add(1,2) << std::endl;
  std::cout << Multiply(3,2) << std::endl;
}
```

# ì“°ë ˆë“œ

# References

https://www.learncpp.com/
